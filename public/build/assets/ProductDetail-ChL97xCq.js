import{_ as v,c as d,b as y,o as i,a as t,i as b,j as k,k as a,h as w,t as r,n as g,d as h,l as D,F as C,f as P,r as m,g as S,e as f,p as R}from"./app-Buy0xxf1.js";const E={name:"ProductDetail",setup(){const l=R(),e=m(null),c=m(null),o=m(30),x=async()=>{try{const n=await f.get(`/products/${l.params.id}`);e.value=n.data,u()}catch(n){console.error("Erreur lors du chargement du produit:",n)}},u=async()=>{try{const n=await f.get(`/products/${l.params.id}/predict`,{params:{days:o.value}});c.value=n.data}catch(n){console.error("Erreur lors du chargement de la prédiction:",n)}},p=()=>e.value?e.value.current_stock<=e.value.stock_minimum?"text-red-600":e.value.current_stock<=e.value.stock_optimal?"text-yellow-600":"text-green-600":"",s=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n),_=n=>new Date(n).toLocaleDateString("fr-FR");return S(()=>{x()}),{product:e,prediction:c,predictionDays:o,loadPrediction:u,getStockClass:p,formatCurrency:s,formatDate:_}}},F={key:0,class:"container mx-auto px-4 py-8"},M={class:"mb-6"},N={class:"bg-white rounded-lg shadow p-6 mb-6"},V={class:"text-3xl font-bold mb-4"},j={class:"grid grid-cols-2 gap-4"},q={class:"font-medium"},B={class:"font-medium"},L={class:"font-medium"},T={class:"bg-white rounded-lg shadow p-6 mb-6"},U={class:"mb-4"},z={key:0,class:"space-y-2"},A={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"},I={key:1,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"},Q={class:"bg-white rounded-lg shadow p-6"},G={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap text-sm"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-6 py-4 whitespace-nowrap text-sm"},W={class:"px-6 py-4 whitespace-nowrap text-sm"};function X(l,e,c,o,x,u){const p=w("router-link");return o.product?(i(),d("div",F,[t("div",M,[b(p,{to:"/products",class:"text-indigo-600 hover:text-indigo-900"},{default:k(()=>[...e[2]||(e[2]=[a("← Retour aux produits",-1)])]),_:1})]),t("div",N,[t("h1",V,r(o.product.name),1),t("div",j,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-gray-600"},"Description",-1)),t("p",q,r(o.product.description||"-"),1)]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-gray-600"},"Code-barres",-1)),t("p",B,r(o.product.barcode||"-"),1)]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-gray-600"},"Stock actuel",-1)),t("p",{class:g(["font-medium text-2xl",o.getStockClass()])},r(o.product.current_stock),3)]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-gray-600"},"Prix",-1)),t("p",L,r(o.formatCurrency(o.product.price)),1)])])]),t("div",T,[e[12]||(e[12]=t("h2",{class:"text-xl font-bold mb-4"},"Prédiction de stock",-1)),t("div",U,[h(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.predictionDays=s),onChange:e[1]||(e[1]=(...s)=>o.loadPrediction&&o.loadPrediction(...s)),class:"border border-gray-300 rounded-md px-3 py-2"},[...e[7]||(e[7]=[t("option",{value:7},"7 jours",-1),t("option",{value:30},"30 jours",-1),t("option",{value:90},"3 mois",-1)])],544),[[D,o.predictionDays]])]),o.prediction?(i(),d("div",z,[t("p",null,[e[8]||(e[8]=t("strong",null,"Stock prévu:",-1)),a(" "+r(o.prediction.predicted_stock),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"Consommation prévue:",-1)),a(" "+r(o.prediction.predicted_consumption),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"Méthode:",-1)),a(" "+r(o.prediction.method),1)]),o.prediction.risk_of_rupture?(i(),d("div",A,[e[11]||(e[11]=t("strong",null,"⚠️ Risque de rupture!",-1)),a(" Commande recommandée: "+r(o.prediction.recommended_order)+" unités ",1)])):(i(),d("div",I," ✓ Aucun risque de rupture "))])):y("",!0)]),t("div",Q,[e[14]||(e[14]=t("h2",{class:"text-xl font-bold mb-4"},"Mouvements récents",-1)),t("table",G,[e[13]||(e[13]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Quantité"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Motif")])],-1)),t("tbody",H,[(i(!0),d(C,null,P(o.product.stock_movements,s=>(i(),d("tr",{key:s.id},[t("td",J,r(o.formatDate(s.movement_date)),1),t("td",K,[t("span",{class:g([s.type==="entree"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 py-1 text-xs font-semibold rounded-full"])},r(s.type==="entree"?"Entrée":"Sortie"),3)]),t("td",O,r(s.quantity),1),t("td",W,r(s.reason||"-"),1)]))),128))])])])])):y("",!0)}const Z=v(E,[["render",X]]);export{Z as default};
